$(function(){function t(t,e){var n=t.find("span").offset().left,i=t.parent().offset().left,a=n-i,o=t.find("span").width()+8;e?$("#cateBar").css({left:a,width:o}):$("#cateBar").stop().animate({left:a,width:o},300)}var e={Android:function(){return navigator.userAgent.match(/Android/i)},BlackBerry:function(){return navigator.userAgent.match(/BlackBerry/i)},iOS:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},Opera:function(){return navigator.userAgent.match(/Opera Mini/i)},Windows:function(){return navigator.userAgent.match(/IEMobile/i)},any:function(){return e.Android()||e.BlackBerry()||e.iOS()||e.Opera()||e.Windows()}};$("pre").addClass("prettyprint"),$(".entry a").each(function(t,e){var n=$(this).attr("href");n&&(0===n.indexOf("#")||0===n.indexOf("/")||n.toLowerCase().indexOf("isme.wang")>-1||$(e).has("img").length||($(this).attr("target","_blank"),$(this).addClass("external")))}),$(".home-follow").click(function(t){t.preventDefault(),$(".home-contact").is(":visible")?$(".home-contact").slideUp(100):$(".home-contact").slideDown(100)}),$(window).on("scroll",function(){$(window).scrollTop()>300?$("#J_gotoTop").fadeIn():$("#J_gotoTop").fadeOut()}),$("#J_gotoTop").click(function(t){$("html,body").animate({scrollTop:"0px"},500)}),$(".heart").hover(function(){$(this).toggleClass("is_animating")}),$(".heart").on("animationend",function(){$(this).toggleClass("is_animating")});var n=function(){var t={};return function(e,n,i){i||(i="Don't call this twice without a uniqueId"),t[i]&&clearTimeout(t[i]),t[i]=setTimeout(e,n)}}();$(".artical-cate li").mouseenter(function(){t($(this))}).mouseleave(function(){t($(".artical-cate .on"))}),$(window).resize(function(e){n(function(){t($(".artical-cate .on"))})}),t($(".artical-cate .on"),!0),function(){function t(){var t=[],e=[],n=0;return $.each($(".entry h2, .entry h3"),function(i,a){if("h2"==a.tagName.toLowerCase()){var o={};o.name=$(a).text(),o.id="menuIndex"+i,t.push(o),n++}else{var s={};s.name=$(a).text(),s.id="menuIndex"+i,e[n-1]||(e[n-1]=[]),e[n-1].push(s)}a.id="menuIndex"+i}),{h2:t,h3:e}}function n(){for(var e=$("h1").text(),n='<ul><li class="h1"><a href="#">'+e+"</a></li>",i=t(),a=i.h2,o=i.h3,s=0;s<a.length;s++)if(n+='<li><a href="#" data-id="'+a[s].id+'">'+a[s].name+"</a></li>",o[s])for(var r=0;r<o[s].length;r++)n+='<li class="h3"><a href="#" data-id="'+o[s][r].id+'">'+o[s][r].name+"</a></li>";return n+="</ul>"}function i(){var t=n(),e='<div id="menuIndex" class="sidenav"></div>';$("#content").append(e),$("#menuIndex").append($(t)).delegate("a","click",function(t){t.preventDefault();var e=$(this).attr("data-id")?"#"+$(this).attr("data-id"):"h1",n=$(e).offset().top;$("body, html").animate({scrollTop:n-30},400,"swing")})}var a=function(){var t={};return function(e,n,i){i||(i="Don't call this twice without a uniqueId"),t[i]&&clearTimeout(t[i]),t[i]=setTimeout(e,n)}}();$(".entry h2").length>2&&!e.any()&&(i(),$(window).load(function(){var t=[];$.each($("#menuIndex li a"),function(e,n){var i=$(n).attr("data-id")?"#"+$(n).attr("data-id"):"h1",a=$(i).offset().top;t.push(a)});var e=$("#menuIndex").offset().top,n=$("#menuIndex").offset().left;$(window).scroll(function(){a(function(){var i,a=$(window).scrollTop(),o=t.length;if(a+20>e?$("#menuIndex").css({position:"fixed",top:"20px",left:n}):$("#menuIndex").css({position:"static",top:0,left:0}),a+60>t[o-1])i=o;else for(var s=0;o>s;s++)if(a+60<=t[s]){i=s;break}$("#menuIndex li").removeClass("on"),$("#menuIndex li").eq(i-1).addClass("on")})}),$(window).resize(function(){$("#menuIndex").css({position:"static",top:0,left:0}),e=$("#menuIndex").offset().top,n=$("#menuIndex").offset().left,$(window).trigger("scroll"),$("#menuIndex").css("max-height",$(window).height()-80)})}),$("#menuIndex").css("max-height",$(window).height()-80))}(),$.getScript("/js/prettify/prettify.js",function(){prettyPrint()}),/css3-animation/.test(location.href)&&($("head").append("<link rel='stylesheet' type='text/css' href='/css/css3-ani.css'/>"),$.getScript("/js/css3-animate.js",function(){})),null!==e.any()&&$("#header").show(),$("#header").on("click",".btn-bar",function(){$("body").hasClass("side")?($("body").removeClass("side"),$("#sidebar").hide(),$("#sidebar-mask").hide(200)):($("body").addClass("side"),$("#sidebar").show(),$("#sidebar-mask").show(200))}),$("#sidebar-mask").on("click",function(){$(this).hide(),$("body").removeClass("side"),$("#sidebar").hide(200)})});