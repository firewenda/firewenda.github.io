$(function(){function e(e,t){var n=e.find("span").offset().left,i=e.parent().offset().left,a=n-i,o=e.find("span").width()+8;t?$("#cateBar").css({left:a,width:o}):$("#cateBar").stop().animate({left:a,width:o},300)}var t={Android:function(){return navigator.userAgent.match(/Android/i)},BlackBerry:function(){return navigator.userAgent.match(/BlackBerry/i)},iOS:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},Opera:function(){return navigator.userAgent.match(/Opera Mini/i)},Windows:function(){return navigator.userAgent.match(/IEMobile/i)},any:function(){return t.Android()||t.BlackBerry()||t.iOS()||t.Opera()||t.Windows()}};$("pre").addClass("prettyprint"),$(".entry a").each(function(e,t){var n=$(this).attr("href");n&&(0===n.indexOf("#")||0===n.indexOf("/")||n.toLowerCase().indexOf("isme.wang")>-1||$(t).has("img").length||($(this).attr("target","_blank"),$(this).addClass("external")))}),$(".home-follow").click(function(e){e.preventDefault(),$(".home-contact").is(":visible")?$(".home-contact").slideUp(100):$(".home-contact").slideDown(100)}),$(window).on("scroll",function(){$(window).scrollTop()>300?$("#J_gotoTop").fadeIn():$("#J_gotoTop").fadeOut()}),$("#J_gotoTop").click(function(e){$("html,body").animate({scrollTop:"0px"},500)}),$(".heart").hover(function(){$(this).toggleClass("is_animating")}),$(".heart").on("animationend",function(){$(this).toggleClass("is_animating")});var n=function(){var e={};return function(t,n,i){i||(i="Don't call this twice without a uniqueId"),e[i]&&clearTimeout(e[i]),e[i]=setTimeout(t,n)}}();$(".artical-cate li").mouseenter(function(){e($(this))}).mouseleave(function(){e($(".artical-cate .on"))}),$(window).resize(function(t){n(function(){e($(".artical-cate .on"))})}),e($(".artical-cate .on"),!0),function(){function e(){var e=[],t=[],n=0;return $.each($(".entry h2, .entry h3"),function(i,a){if("h2"==a.tagName.toLowerCase()){var o={};o.name=$(a).text(),o.id="menuIndex"+i,e.push(o),n++}else{var s={};s.name=$(a).text(),s.id="menuIndex"+i,t[n-1]||(t[n-1]=[]),t[n-1].push(s)}a.id="menuIndex"+i}),{h2:e,h3:t}}function n(){for(var t=$("h1").text(),n='<ul><li class="h1"><a href="#">'+t+"</a></li>",i=e(),a=i.h2,o=i.h3,s=0;s<a.length;s++)if(n+='<li><a href="#" data-id="'+a[s].id+'">'+a[s].name+"</a></li>",o[s])for(var r=0;r<o[s].length;r++)n+='<li class="h3"><a href="#" data-id="'+o[s][r].id+'">'+o[s][r].name+"</a></li>";return n+="</ul>"}function i(){var e=n(),t='<div id="menuIndex" class="sidenav"></div>';$("#content").append(t),$("#menuIndex").append($(e)).delegate("a","click",function(e){e.preventDefault();var t=$(this).attr("data-id")?"#"+$(this).attr("data-id"):"h1",n=$(t).offset().top;$("body, html").animate({scrollTop:n-30},400,"swing")})}var a=function(){var e={};return function(t,n,i){i||(i="Don't call this twice without a uniqueId"),e[i]&&clearTimeout(e[i]),e[i]=setTimeout(t,n)}}();$(".entry h2").length>2&&!t.any()&&(i(),$(window).load(function(){var e=[];$.each($("#menuIndex li a"),function(t,n){var i=$(n).attr("data-id")?"#"+$(n).attr("data-id"):"h1",a=$(i).offset().top;e.push(a)});var t=$("#menuIndex").offset().top,n=$("#menuIndex").offset().left;$(window).scroll(function(){a(function(){var i,a=$(window).scrollTop(),o=e.length;if(a+20>t?$("#menuIndex").css({position:"fixed",top:"20px",left:n}):$("#menuIndex").css({position:"static",top:0,left:0}),a+60>e[o-1])i=o;else for(var s=0;o>s;s++)if(a+60<=e[s]){i=s;break}$("#menuIndex li").removeClass("on"),$("#menuIndex li").eq(i-1).addClass("on")})}),$(window).resize(function(){$("#menuIndex").css({position:"static",top:0,left:0}),t=$("#menuIndex").offset().top,n=$("#menuIndex").offset().left,$(window).trigger("scroll"),$("#menuIndex").css("max-height",$(window).height()-80)})}),$("#menuIndex").css("max-height",$(window).height()-80))}(),$.getScript("/js/prettify/prettify.js",function(){prettyPrint()}),/css3-animation/.test(location.href)&&($("head").append("<link rel='stylesheet' type='text/css' href='/css/css3-ani.css'/>"),$.getScript("/js/css3-animate.js",function(){})),null!==t.any()&&$("#header").show(),$("#header").on("click",".btn-bar",function(){$("body").hasClass("side")?($("body").removeClass("side"),$("#sidebar").hide(),$("#sidebar-mask").hide(200)):($("body").addClass("side"),$("#sidebar").show(),$("#sidebar-mask").show(200))}),$("#sidebar-mask").on("click",function(){$(this).hide(),$("body").removeClass("side"),$("#sidebar").hide(200)}),$(window).on("resize",function(){null!==t.any()?$("#header").show():$("#header").hide()})});