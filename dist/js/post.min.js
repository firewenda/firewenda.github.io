$(function(){function t(t,n){var e=t.find("span").offset().left,i=t.parent().offset().left,a=e-i,o=t.find("span").width()+8;n?$("#cateBar").css({left:a,width:o}):$("#cateBar").stop().animate({left:a,width:o},300)}var n={Android:function(){return navigator.userAgent.match(/Android/i)},BlackBerry:function(){return navigator.userAgent.match(/BlackBerry/i)},iOS:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},Opera:function(){return navigator.userAgent.match(/Opera Mini/i)},Windows:function(){return navigator.userAgent.match(/IEMobile/i)},any:function(){return n.Android()||n.BlackBerry()||n.iOS()||n.Opera()||n.Windows()}};$("pre").addClass("prettyprint"),$(".entry a").each(function(t,n){var e=$(this).attr("href");e&&(0===e.indexOf("#")||0===e.indexOf("/")||e.toLowerCase().indexOf("isme.wang")>-1||$(n).has("img").length||($(this).attr("target","_blank"),$(this).addClass("external")))}),$(".home-follow").click(function(t){t.preventDefault(),$(".home-contact").is(":visible")?$(".home-contact").slideUp(100):$(".home-contact").slideDown(100)}),$(window).on("scroll",function(){$(window).scrollTop()>300?$("#J_gotoTop").fadeIn():$("#J_gotoTop").fadeOut()}),$("#J_gotoTop").click(function(t){$("html,body").animate({scrollTop:"0px"},500)}),$(".heart").hover(function(){$(this).toggleClass("is_animating")}),$(".heart").on("animationend",function(){$(this).toggleClass("is_animating")});var e=function(){var t={};return function(n,e,i){i||(i="Don't call this twice without a uniqueId"),t[i]&&clearTimeout(t[i]),t[i]=setTimeout(n,e)}}();$(".artical-cate li").mouseenter(function(){t($(this))}).mouseleave(function(){t($(".artical-cate .on"))}),$(window).resize(function(n){e(function(){t($(".artical-cate .on"))})}),t($(".artical-cate .on"),!0),function(){function t(){var t=[],n=[],e=0;return $.each($(".entry h2, .entry h3"),function(i,a){if("h2"==a.tagName.toLowerCase()){var o={};o.name=$(a).text(),o.id="menuIndex"+i,t.push(o),e++}else{var r={};r.name=$(a).text(),r.id="menuIndex"+i,n[e-1]||(n[e-1]=[]),n[e-1].push(r)}a.id="menuIndex"+i}),{h2:t,h3:n}}function e(){for(var n=$("h1").text(),e='<ul><li class="h1"><a href="#">'+n+"</a></li>",i=t(),a=i.h2,o=i.h3,r=0;r<a.length;r++)if(e+='<li><a href="#" data-id="'+a[r].id+'">'+a[r].name+"</a></li>",o[r])for(var s=0;s<o[r].length;s++)e+='<li class="h3"><a href="#" data-id="'+o[r][s].id+'">'+o[r][s].name+"</a></li>";return e+="</ul>"}function i(){var t=e(),n='<div id="menuIndex" class="sidenav"></div>';$("#content").append(n),$("#menuIndex").append($(t)).delegate("a","click",function(t){t.preventDefault();var n=$(this).attr("data-id")?"#"+$(this).attr("data-id"):"h1",e=$(n).offset().top;$("body, html").animate({scrollTop:e-30},400,"swing")})}var a=function(){var t={};return function(n,e,i){i||(i="Don't call this twice without a uniqueId"),t[i]&&clearTimeout(t[i]),t[i]=setTimeout(n,e)}}();$(".entry h2").length>2&&!n.any()&&(i(),$(window).load(function(){var t=[];$.each($("#menuIndex li a"),function(n,e){var i=$(e).attr("data-id")?"#"+$(e).attr("data-id"):"h1",a=$(i).offset().top;t.push(a)});var n=$("#menuIndex").offset().top,e=$("#menuIndex").offset().left;$(window).scroll(function(){a(function(){var i,a=$(window).scrollTop(),o=t.length;if(a+20>n?$("#menuIndex").css({position:"fixed",top:"20px",left:e}):$("#menuIndex").css({position:"static",top:0,left:0}),a+60>t[o-1])i=o;else for(var r=0;o>r;r++)if(a+60<=t[r]){i=r;break}$("#menuIndex li").removeClass("on"),$("#menuIndex li").eq(i-1).addClass("on")})}),$(window).resize(function(){$("#menuIndex").css({position:"static",top:0,left:0}),n=$("#menuIndex").offset().top,e=$("#menuIndex").offset().left,$(window).trigger("scroll"),$("#menuIndex").css("max-height",$(window).height()-80)})}),$("#menuIndex").css("max-height",$(window).height()-80))}(),$.getScript("/js/prettify/prettify.js",function(){prettyPrint()}),/\#comment/.test(location.hash)&&$("#disqus_container .comment").trigger("click"),/css3-animation/.test(location.href)&&($("head").append("<link rel='stylesheet' type='text/css' href='/css/css3-ani.css'/>"),$.getScript("/js/css3-animate.js",function(){}))});