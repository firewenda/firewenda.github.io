<!DOCTYPE html>
<html>
<head>
    <!--
    * Author:         Wenda
    -->
    <meta charset="utf-8" />
    <title>相同内容隔行变色 | wenda's blog</title>
    <meta name="author" content="Wenda" />
    <meta name="renderer" content="webkit">
    <meta name="description" content="Wenda's Blog" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0">
    <link rel="stylesheet" href="/css/default.css" type="text/css" />
    <link rel="stylesheet" href="/css/fonts/font-awesome.min.css">
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
    <link rel="alternate" type="application/atom+xml" title="Recent Entries" href="/atom.xml" />
    <script src="/js/jquery-2.1.4.min.js" type="text/javascript"></script>
</head>
<body>

    <div class="home-menu">
        <div class="home-icon-con">
            <a class="home-menu-icon" href="/">Wenda</a>
            <a class="home-follow" href="#" title="Contact Me">+</a>
        </div>
        <div class="home-contact">
            <a href="http://weibo.com/firewenda" target="_blank" class="fa fa-2x fa-weibo" title="weibo"><span>weibo</span></a>
            <a href="https://github.com/firewenda" target="_blank" class="fa fa-2x fa-github" title="github"><span>github</span></a>
            <a href="https://www.facebook.com/gs.litong" class="fa fa-2x fa-facebook" title="facebook"><span>facebook</span></a>
        </div>
    </div>

    <link rel="stylesheet" href="/js/prettify/prettify.css" />
<style type="text/css">
    body { background:#e8e8e8; }
    @media screen and (max-width: 750px){
        body { background:#fff; }
    }
    @media screen and (max-width: 1020px){
        body { background:#fff; }
    }
</style>

<div id="content">
    <div class="entry">
        <h1 class="entry-title"><a href="/blog-share-4" title="相同内容隔行变色">相同内容隔行变色</a></h1>
        <p class="entry-date">2016-03-09</p>
        <p>最近做的一个项目，通过接口渲染数据后，使相同内容的表格行为同一种颜色，以下是代码实现。
页面基于jquery，使用<a href="https://github.com/aui/artTemplate" target="_blank">artTemplate模板引擎</a></p>

<h3 id="css">CSS代码</h3>

<div class="highlighter-rouge"><pre class="highlight"><code>.color_0 {
    background: #ccc;
}

.color_1 {
    background: #fff;
}
</code></pre>
</div>

<h3 id="html">HTML代码</h3>

<div class="highlighter-rouge"><pre class="highlight"><code>&lt;table class="main-table"&gt;
&lt;/table&gt;
&lt;script id="insurerTemplate" type="text/html"&gt;
    /* 这里需要2个大括号，详情见官网文档 */
    {each}
    &lt;tr&gt;&lt;td class="item"&gt;&lt;/td&gt;&lt;/tr&gt;
    {/each}
&lt;/script&gt;
</code></pre>
</div>

<h3 id="section">数据模拟</h3>

<div class="highlighter-rouge"><pre class="highlight"><code>var dataList = {
    data: [
        {
            id: 1,
            insurerId: 1,
            insurerName: '张三'
        },
        {
            id: 2,
            insurerId: 1,
            insurerName: '张三'
        },
        {
            id: 3,
            insurerId: 2,
            insurerName: '李四'
        },
        {
            id: 4,
            insurerId: 3,
            insurerName: '王五'
        },
        {
            id: 5,
            insurerId: 3,
            insurerName: '王五'
        }
    ]
};
</code></pre>
</div>

<h3 id="js">JS代码</h3>

<div class="highlighter-rouge"><pre class="highlight"><code>$(function() {
    function changeColor(conf, data) {
        this.init.apply(this, arguments);
    }
    changeColor.prototype = {
        check: function() {
            var _self = this;
            $(_self.table).find('.item').each(function(k, v) {
                var html = $(v).text(),
                    flag = false,
                    hasindex = 0,
                    color = 0;
                $.each(_self.temparr, function(index, item) {
                    if (html == item.t) {
                        flag = true;
                        hasindex = index;
                    }
                });
                //如果不存在的话
                if (flag === false) {
                    try {
                        var lastcolor = _self.temparr[_self.temparr.length - 1].color;
                        color = lastColor &gt;= 1 ? 0 : lastColor + 1;
                    } catch (e) {}
                    _self.temparr.push({
                        t: html,
                        color: color
                    });
                } else {
                    //如果已经存在的话
                    color = _self.temparr[hasindex].color;
                }
                $(v).addClass('color_' + color);
            });
        },
        init: function(conf) {
            var _self = this;
            _self.temparr = [];
            _self.table = conf.table || '';
            _self.check();
        }
    };

    var renderHtml = template('insurerTemplate', dataList);
    $('.main-table').html(renderHtml).promise().done(function(){
        new changeColor({
            table: '.main-table'
        });
    });
});
</code></pre>
</div>

        <!-- 多说评论框 start -->
        <div class="ds-thread" data-thread-key="/blog-share-4" data-title="相同内容隔行变色" data-url="http:www.isme.wang/blog-share-4"></div>
        <!-- 多说评论框 end -->
        <!-- 多说公共JS代码 start (一个网页只需插入一次) -->
        <script type="text/javascript">
        var duoshuoQuery = {short_name:"firewenda"};
            (function() {
                var ds = document.createElement('script');
                ds.type = 'text/javascript';ds.async = true;
                ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
                ds.charset = 'UTF-8';
                (document.getElementsByTagName('head')[0] 
                 || document.getElementsByTagName('body')[0]).appendChild(ds);
            })();
            </script>
        <!-- 多说公共JS代码 end -->
    </div>

    <div class="sidenav">
        <div class="heart"></div>
        <img class="head-img" src="/images/head.png">
        <ul class="some-info">
            <li>姓名：文达</li>
            <li>简介：在成为前端菜鸟的路上奔跑！</li>
        </ul>
    </div>

    <div class="sidenav">
        <h2>Blog</h2>
        <ul class="artical-list">
        
            <li><a href="/blog-common-code">常用代码总结</a></li>
        
            <li><a href="/blog-share-4">相同内容隔行变色</a></li>
        
            <li><a href="/blog-share-3">【转载】完全理解JavaScript关键字this</a></li>
        
            <li><a href="/blog-share-2">块级元素垂直居中的方法</a></li>
        
            <li><a href="/blog-dekaron-1">Javascript挑战题（一）：如何产生一个n以内的斐波那契序列？</a></li>
        
            <li><a href="/blog-share-layout">【转载】利用HTML和CSS实现常见的布局</a></li>
        
            <li><a href="/github-pages">使用Github Pages建独立博客</a></li>
        
        </ul>

        <h2>life</h2>
        <ul class="artical-list">
        
            <li><a href="/life-mylife-howstudy">梁漱溟：做学问的八个境界</a></li>
        
            <li><a href="/life-mylife-quite">静心写代码</a></li>
        
            <li><a href="/life-mylife-bian">彼岸</a></li>
        
            <li><a href="/life-republish-questioningar">【转载经典】 提问的艺术</a></li>
        
            <li><a href="/about-simplify">胡言乱语说简单</a></li>
        
        </ul>

        <h2>Project</h2>
        <ul class="artical-list">
        
            <li><a href="/project-sublimetext3-packages">sublime text 常用插件推荐</a></li>
        
            <li><a href="/project-favorites">个人收藏夹</a></li>
        
            <li><a href="/overapi-cheatsheet">OverAPI</a></li>
        
        </ul>
    </div>
</div>

<script src="/js/post.js" type="text/javascript"></script>


    <div id="J_gotoTop"></div>

    <script type="text/javascript">
        $(function(){
            $('.home-follow').click(function(e){
                e.preventDefault();

                if($('.home-contact').is(':visible')){
                    $('.home-contact').slideUp(100);
                }else{
                    $('.home-contact').slideDown(100);
                }
            });
            $(window).on('scroll',function(){
                if($(window).scrollTop() > 300){
                    $("#J_gotoTop").fadeIn();
                }else{
                    $("#J_gotoTop").fadeOut();
                }
            })
            //返回顶部
            $("#J_gotoTop").click(function(e){
                $('html,body').animate({
                    scrollTop:'0px'
                },500);
            });
        })
    </script>
</body>
</html>
