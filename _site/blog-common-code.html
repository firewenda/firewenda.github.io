<!DOCTYPE html>
<html>
<head>
    <!--
    * Author:         Wenda
    -->
    <meta charset="utf-8" />
    <title>常用代码总结 | wenda's blog</title>
    <meta name="author" content="Wenda" />
    <meta name="renderer" content="webkit">
    <meta name="description" content="Wenda's Blog" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0">
    <link rel="stylesheet" href="/css/default.css" type="text/css" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
    <link rel="alternate" type="application/atom+xml" title="Recent Entries" href="/atom.xml" />
    <script src="/js/jquery-2.1.4.min.js" type="text/javascript"></script>
</head>
<body>

    <div class="home-menu">
        <div class="home-icon-con">
            <a class="home-menu-icon" href="/">Wenda</a>
            <a class="home-follow" href="#" title="Contact Me">+</a>
        </div>
        <div class="home-contact">
            <a href="http://weibo.com/firewenda" target="_blank" style="margin-left:-5px;"><img src="http://www.weibo.com/favicon.ico" alt="" width="25"/></a>
            <a href="http://www.douban.com/people/56968598/" target="_blank" style="text-align:center;"><img src="http://www.douban.com/favicon.ico" alt="" width="22"/></a>
            <a href="https://www.facebook.com/gs.litong" target="_blank" style="text-align:center;"><img src="/images/facebook.ico" alt="" width="22"/></a>
        </div>
    </div>

    <link rel="stylesheet" href="/js/prettify/prettify.css" />
<style type="text/css">
    body { background:#e8e8e8; }
    @media screen and (max-width: 750px){
        body { background:#fff; }
    }
    @media screen and (max-width: 1020px){
        body { background:#fff; }
    }
</style>

<div id="content">
    <div class="entry">
        <h1 class="entry-title"><a href="/blog-common-code" title="常用代码总结">常用代码总结</a></h1>
        <p class="entry-date">2016-03-25</p>
        <h2 id="section">常用正则表达式</h2>

<p>大于等于0的数字，最多允许两位小数</p>

<div class="highlighter-rouge"><pre class="highlight"><code>/^\d+(?:\.\d{1,2})?$/.test(2.12); // =&gt; true
</code></pre>
</div>

<h2 id="js">常用JS代码</h2>
<div class="highlighter-rouge"><pre class="highlight"><code>var util = {
    /**
     * Function formatMoney 数值转或货币格式
     *  -@param {Number} number 要转换的数值
     *  -@param {Number} places 保留小数点位数
     *  -@param {String} symbol 货币符号
     *  -@param {String} thousand 间隔符
     *  -@param {String} decimal 小数位符号
     * Return {String}
     */
    formatMoney: function(number, places, symbol, thousand, decimal) {
        number = number || 0;
        places = !isNaN(places = Math.abs(places)) ? places : 2;
        symbol = symbol !== undefined ? symbol : "$";
        thousand = thousand || ",";
        decimal = decimal || ".";
        var negative = number &lt; 0 ? "-" : "",
            i = parseInt(number = Math.abs(+number || 0).toFixed(places), 10) + "",
            j = (j = i.length) &gt; 3 ? j % 3 : 0;
        return symbol + negative + (j ? i.substr(0, j) + thousand : "") + i.substr(j).replace(/(\d{3})(?=\d)/g, "$1" + thousand) + (places ? decimal + Math.abs(number - i).toFixed(places).slice(2) : "");
    },
    // 两个浮点数求和
    accAdd: function(num1, num2) {
        var r1, r2, m;
        try {
            r1 = num1.toString().split('.')[1].length;
        } catch (e) {
            r1 = 0;
        }
        try {
            r2 = num2.toString().split(".")[1].length;
        } catch (e) {
            r2 = 0;
        }
        m = Math.pow(10, Math.max(r1, r2));
        // return (num1*m+num2*m)/m;
        return Math.round(num1 * m + num2 * m) / m;
    },

    // 两个浮点数相减
    accSub: function(num1, num2) {
        var r1, r2, m;
        try {
            r1 = num1.toString().split('.')[1].length;
        } catch (e) {
            r1 = 0;
        }
        try {
            r2 = num2.toString().split(".")[1].length;
        } catch (e) {
            r2 = 0;
        }
        m = Math.pow(10, Math.max(r1, r2));
        n = (r1 &gt;= r2) ? r1 : r2;
        return (Math.round(num1 * m - num2 * m) / m).toFixed(n);
    },
    //两个浮点数相乘
    accMul: function(num1, num2) {
        var m = 0,
            s1 = num1.toString(),
            s2 = num2.toString();
        try {
            m += s1.split(".")[1].length;
        } catch (e) {}
        try {
            m += s2.split(".")[1].length;
        } catch (e) {}
        return Number(s1.replace(".", "")) * Number(s2.replace(".", "")) / Math.pow(10, m);
    }
    // 两个浮点数相除
    accDiv: function(num1, num2) {
        var t1, t2, r1, r2;
        try {
            t1 = num1.toString().split('.')[1].length;
        } catch (e) {
            t1 = 0;
        }
        try {
            t2 = num2.toString().split(".")[1].length;
        } catch (e) {
            t2 = 0;
        }
        r1 = Number(num1.toString().replace(".", ""));
        r2 = Number(num2.toString().replace(".", ""));
        return (r1 / r2) * Math.pow(10, t2 - t1);
    }
}
</code></pre>
</div>

<p>多个浮点数相加</p>

<div class="highlighter-rouge"><pre class="highlight"><code>var sumArr = ["209.49", "52.37", "13.09", "4", "261.86"];
var sum = sumArr.reduce(util.accAdd); // =&gt;540.81
</code></pre>
</div>

<p>*注意：reduce 为ES5 Array新方法，ie9以下浏览器不兼容<br />
具体用法参考：<a href="http://www.zhihu.com/question/24927450" target="_blank">如何形象地解释 JavaScript 中 map、foreach、reduce 间的区别？</a></p>

<h2 id="html">常用HTML代码</h2>

<h2 id="css">常用CSS代码</h2>

<p>文字太多超出部分省略号显示</p>

<div class="highlighter-rouge"><pre class="highlight"><code>.text-ellipsis{
    max-width: 185px; /*设置宽度*/
    white-space: nowrap; /*将文本限制在一行*/
    overflow: hidden; /*溢出部分要隐藏*/
    text-overflow: ellipsis; /*出现省略号*/
}
</code></pre>
</div>

        <!-- 多说评论框 start -->
        <div class="ds-thread" data-thread-key="/blog-common-code" data-title="常用代码总结" data-url="http:www.isme.wang/blog-common-code"></div>
        <!-- 多说评论框 end -->
        <!-- 多说公共JS代码 start (一个网页只需插入一次) -->
        <script type="text/javascript">
        var duoshuoQuery = {short_name:"firewenda"};
            (function() {
                var ds = document.createElement('script');
                ds.type = 'text/javascript';ds.async = true;
                ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
                ds.charset = 'UTF-8';
                (document.getElementsByTagName('head')[0] 
                 || document.getElementsByTagName('body')[0]).appendChild(ds);
            })();
            </script>
        <!-- 多说公共JS代码 end -->
    </div>

    <div class="sidenav">
        <div class="heart"></div>
        <img class="head-img" src="/images/head.png">
        <ul class="some-info">
            <li>姓名：文达</li>
            <li>简介：在成为前端菜鸟的路上奔跑！</li>
        </ul>
    </div>

    <div class="sidenav">
        <h2>Blog</h2>
        <ul class="artical-list">
        
            <li><a href="/blog-common-code">常用代码总结</a></li>
        
            <li><a href="/blog-share-4">相同内容隔行变色</a></li>
        
            <li><a href="/blog-share-3">【转载】完全理解JavaScript关键字this</a></li>
        
            <li><a href="/blog-share-2">块级元素垂直居中的方法</a></li>
        
            <li><a href="/blog-dekaron-1">Javascript挑战题（一）：如何产生一个n以内的斐波那契序列？</a></li>
        
            <li><a href="/blog-share-layout">【转载】利用HTML和CSS实现常见的布局</a></li>
        
            <li><a href="/github-pages">使用Github Pages建独立博客</a></li>
        
        </ul>

        <h2>life</h2>
        <ul class="artical-list">
        
            <li><a href="/life-mylife-howstudy">梁漱溟：做学问的八个境界</a></li>
        
            <li><a href="/life-mylife-quite">静心写代码</a></li>
        
            <li><a href="/life-mylife-bian">彼岸</a></li>
        
            <li><a href="/life-republish-questioningar">【转载经典】 提问的艺术</a></li>
        
            <li><a href="/about-simplify">胡言乱语说简单</a></li>
        
        </ul>

        <h2>Project</h2>
        <ul class="artical-list">
        
            <li><a href="/project-sublimetext3-packages">sublime text 常用插件推荐</a></li>
        
            <li><a href="/project-favorites">个人收藏夹</a></li>
        
            <li><a href="/overapi-cheatsheet">OverAPI</a></li>
        
        </ul>
    </div>
</div>

<script src="/js/post.js" type="text/javascript"></script>

    
    <div id="J_gotoTop"></div>

    <script type="text/javascript">
        $(function(){
            $('.home-follow').click(function(e){
                e.preventDefault();

                if($('.home-contact').is(':visible')){
                    $('.home-contact').slideUp(100);
                }else{
                    $('.home-contact').slideDown(100);
                }
            });
            $(window).on('scroll',function(){
                if($(window).scrollTop() > 300){
                    $("#J_gotoTop").fadeIn();
                }else{
                    $("#J_gotoTop").fadeOut();
                }
            })
            //返回顶部
            $("#J_gotoTop").click(function(e){
                $('html,body').animate({
                    scrollTop:'0px'
                },500);
            });
        })
    </script>
</body>
</html>
